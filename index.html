<!DOCTYPE html>
<html>
<head>
    <link href="./resources/css/index.css" type="text/css" rel="stylesheet">
    <script src="./resources/js/stocks.js"></script>
    <script src="./resources/js/bundle.js"></script>
</head>
<body>
    <div class="main_text">
        <h1>Hello World</h1>
        <p>I'm hosted with GitHub Pages.</p>
        <p>Hello my name is Eric!</p>
    </div>
    <script>
        var assets = ['XIC.TO','XIN.TO','XSP.TO','XBB.TO','CAR-UN.TO']
        var options = {
          symbol: 'AAPL',
          interval: 'weekly',
          amount: 52
        };
        var cov = require( 'compute-covariance' );
        let results = {};
        var x = [ 1, 2, 3, 4, 5 ],y = [ 5, 4, 3, 2, 1 ];
        var mat = cov( x, y );

        async function getStockData(assets) {
            var stocks = new Stocks('HOW0LDN2HBFLZDA2')
            for (a in assets) {
                options.symbol = assets[a];
                results[a] = await stocks.timeSeries(options);
            }
            return results;
        }
        stockData = getStockData(assets);
        console.log(results);
        
        const test = (results) => {
            var closeArray = [];
            for (var p in results) {
                tArray = [];
                for (var d in results[p]){
                    console.log(assets[p])
                    tArray.push(results[p][d].close)
                };
                closeArray[p] = tArray;
            }
            return closeArray;
        };

    </script>
    <div>
        <h2>Hey! I'm tired</h2>
        <button onclick="getStockData()">Refresh stock data</button>
      </div>
</body>
</html>